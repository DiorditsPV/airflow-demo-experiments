# Airflow Experimental Project

Этот проект предназначен для экспериментов, отладки Airflow DAG и тестирования гипотез, связанных с использованием Airflow и сопутствующего стека. Он имеет структуру, приближенную к целевому production-проекту.

## Цели проекта

- Быстрое прототипирование и тестирование идей, связанных с Airflow
- Отладка и тестирование DAG в изолированном окружении
- Проверка интеграции Airflow с другими компонентами стека (Pyspark, DBT и т.д.)
- Хранение примеров кода, используемых в production DAG (gRPC, API, Kafka и т.д.)

## Стек проекта

- Apache Airflow - оркестрация задач и управление зависимостями
- Pyspark - обработка больших данных
- DBT (Data Build Tool) - трансформация данных
- PostgreSQL - хранение метаданных Airflow и результатов трансформаций
- Docker - контейнеризация и развертывание сервисов

## Структура проекта

- `dags/` - директория с DAG
- `dbt_projects/` - директория с DBT проектами
- `workflow_tools/` - директория со вспомогательным кодом
- `.env` - файл с переменными окружения
- `.gitignore` - файл с исключениями для Git
- `docker-compose.yaml` - конфигурация Docker Compose для развертывания сервисов
- `README.md` - документация проекта

## Переменные окружения

Проект использует переменные окружения для конфигурации. Основные переменные:

- `AIRFLOW_VERSION` - версия Airflow
- `DB_USER`, `DB_PASSWORD`, `DB_NAME` - реквизиты доступа к БД
- `TELEGRAM_BOT_TOKEN`, `TELEGRAM_CHAT_ID` - реквизиты для отправки уведомлений в Telegram
- `DBT_PROJECTS_PATH` - путь к директории с DBT проектами
- `DBT_JAFFLE_SHOP_PATH` - путь к конкретному DBT проекту (Jaffle Shop)

Переменные окружения задаются в файле `.env` и используются в `docker-compose.yaml` для конфигурации сервисов.

## Запуск проекта

Для запуска проекта необходимо:

1. Установить Docker и Docker Compose
2. Клонировать репозиторий: `git clone https://github.com/username/airflow-experimental.git`
3. Перейти в директорию проекта: `cd airflow-experimental`
4. Создать файл `.env` и задать необходимые переменные окружения (см. пример в `.env.example`)
5. Запустить сервисы: `docker-compose up -d`
6. Открыть Airflow UI в браузере: `http://localhost:8080`
